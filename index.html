<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equipment Criticality Assessment System</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .language-selector { position: relative; }
        .criteria-editor { max-height: 400px; overflow-y: auto; }
        .weight-slider { width: 100%; }
        .flag-icon { width: 20px; height: 15px; }
         {
            body { font-size: 12px; }
            .no-print { display: none !important; }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header with Language Selector -->
    <header class="bg-white shadow-lg border-b-4 border-blue-600">
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-cogs text-blue-600 text-3xl"></i>
                    <h1 class="text-2xl font-bold text-gray-800" id="main-title">Equipment Criticality Assessment System</h1>
                </div>
                <div class="language-selector">
                    <select id="language-selector" class="bg-white border-2 border-gray-300 rounded-lg px-3 py-2 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="en">ðŸ‡ºðŸ‡¸ English</option>
                        <option value="fr">ðŸ‡«ðŸ‡· FranÃ§ais</option>
                        <option value="de">ðŸ‡©ðŸ‡ª Deutsch</option>
                        <option value="es">ðŸ‡ªðŸ‡¸ EspaÃ±ol</option>
                    </select>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Navigation -->
    <nav class="bg-blue-600 text-white">
        <div class="container mx-auto px-4">
            <div class="flex space-x-1 overflow-x-auto">
                <button class="tab-button px-6 py-3 font-medium hover:bg-blue-700 transition-colors whitespace-nowrap active" data-tab="dashboard" id="nav-dashboard">
                    <i class="fas fa-chart-dashboard mr-2"></i><span class="translatable" data-key="dashboard">Dashboard</span>
                </button>
                <button class="tab-button px-6 py-3 font-medium hover:bg-blue-700 transition-colors whitespace-nowrap" data-tab="assets" id="nav-assets">
                    <i class="fas fa-list mr-2"></i><span class="translatable" data-key="asset_management">Asset Management</span>
                </button>
                <button class="tab-button px-6 py-3 font-medium hover:bg-blue-700 transition-colors whitespace-nowrap" data-tab="assessment" id="nav-assessment">
                    <i class="fas fa-clipboard-check mr-2"></i><span class="translatable" data-key="batch_assessment">Batch Assessment</span>
                </button>
                <button class="tab-button px-6 py-3 font-medium hover:bg-blue-700 transition-colors whitespace-nowrap" data-tab="reports" id="nav-reports">
                    <i class="fas fa-file-pdf mr-2"></i><span class="translatable" data-key="reports">Reports</span>
                </button>
                <button class="tab-button px-6 py-3 font-medium hover:bg-blue-700 transition-colors whitespace-nowrap" data-tab="settings" id="nav-settings">
                    <i class="fas fa-cog mr-2"></i><span class="translatable" data-key="settings">Settings</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content Container -->
    <main class="container mx-auto px-4 py-6">
        
        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <!-- Stats Cards -->
                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center">
                        <div class="p-3 rounded-full bg-blue-100 text-blue-600">
                            <i class="fas fa-cubes text-2xl"></i>
                        </div>
                        <div class="ml-4">
                            <h3 class="text-lg font-semibold text-gray-700 translatable" data-key="total_assets">Total Assets</h3>
                            <p class="text-3xl font-bold text-blue-600" id="total-assets-count">0</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center">
                        <div class="p-3 rounded-full bg-red-100 text-red-600">
                            <i class="fas fa-exclamation-triangle text-2xl"></i>
                        </div>
                        <div class="ml-4">
                            <h3 class="text-lg font-semibold text-gray-700 translatable" data-key="critical_assets">Critical Assets</h3>
                            <p class="text-3xl font-bold text-red-600" id="critical-assets-count">0</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center">
                        <div class="p-3 rounded-full bg-green-100 text-green-600">
                            <i class="fas fa-check-circle text-2xl"></i>
                        </div>
                        <div class="ml-4">
                            <h3 class="text-lg font-semibold text-gray-700 translatable" data-key="assessed_assets">Assessed Assets</h3>
                            <p class="text-3xl font-bold text-green-600" id="assessed-assets-count">0</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Criticality Distribution Chart -->
            <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                <h3 class="text-xl font-semibold text-gray-800 mb-4 translatable" data-key="criticality_distribution">Criticality Distribution</h3>
                <div style="height: 400px;">
                    <canvas id="criticality-chart"></canvas>
                </div>
            </div>

            <!-- Maintenance Priority Matrix -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-xl font-semibold text-gray-800 mb-4 translatable" data-key="maintenance_priority_matrix">Maintenance Priority Matrix</h3>
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider translatable" data-key="tier">Tier</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider translatable" data-key="criticality_level">Criticality Level</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider translatable" data-key="maintenance_strategy">Maintenance Strategy</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider translatable" data-key="monitoring_tools">Monitoring Tools</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200" id="priority-matrix-body">
                            <!-- Dynamic content will be inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Asset Management Tab -->
        <div id="assets" class="tab-content">
            <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4 lg:mb-0 translatable" data-key="asset_management">Asset Management</h2>
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4">
                        <button id="import-assets-btn" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            <i class="fas fa-upload mr-2"></i><span class="translatable" data-key="import_assets">Import Assets</span>
                        </button>
                        <button id="download-template-btn" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors">
                            <i class="fas fa-download mr-2"></i><span class="translatable" data-key="download_template">Download Template</span>
                        </button>
                        <button id="add-asset-btn" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                            <i class="fas fa-plus mr-2"></i><span class="translatable" data-key="add_asset">Add Asset</span>
                        </button>
                    </div>
                </div>

                <!-- Import Validation Instructions -->
                <div id="import-validation" class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-6">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <i class="fas fa-info-circle text-blue-400"></i>
                        </div>
                        <div class="ml-3">
                            <h3 class="text-sm font-medium text-blue-800 translatable" data-key="import_instructions">Import Instructions</h3>
                            <div class="mt-2 text-sm text-blue-700">
                                <ul class="list-disc pl-5 space-y-1">
                                    <li class="translatable" data-key="asset_id_unique">Asset ID must be unique</li>
                                    <li class="translatable" data-key="asset_name_required">Asset Name is required</li>
                                    <li class="translatable" data-key="type_options">Type must be one of: Rotating, Fixed, Mobile, Electrical, Instrumentation</li>
                                    <li class="translatable" data-key="location_specify">Location should specify facility/area</li>
                                    <li class="translatable" data-key="optional_fields">Optional fields: Description, Manufacturer, Model, Install Date</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Asset List -->
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    <input type="checkbox" id="select-all-assets" class="rounded">
                                </th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider translatable" data-key="asset_id">Asset ID</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider translatable" data-key="asset_name">Asset Name</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider translatable" data-key="type">Type</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider translatable" data-key="location">Location</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider translatable" data-key="criticality">Criticality</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider translatable" data-key="actions">Actions</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200" id="assets-table-body">
                            <!-- Dynamic content will be inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Batch Assessment Tab -->
        <div id="assessment" class="tab-content">
            <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                <h2 class="text-2xl font-semibold text-gray-800 mb-6 translatable" data-key="batch_assessment">Batch Assessment</h2>
                
                <!-- Batch Operations -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 translatable" data-key="bulk_operations">Bulk Operations</h3>
                        <div class="space-y-4">
                            <button id="bulk-score-btn" class="w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                <i class="fas fa-clipboard-list mr-2"></i><span class="translatable" data-key="bulk_scoring">Bulk Scoring</span>
                            </button>
                            <button id="apply-template-btn" class="w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
                                <i class="fas fa-copy mr-2"></i><span class="translatable" data-key="apply_template">Apply Template</span>
                            </button>
                            <button id="reset-scores-btn" class="w-full bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors">
                                <i class="fas fa-undo mr-2"></i><span class="translatable" data-key="reset_scores">Reset Scores</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 translatable" data-key="assessment_progress">Assessment Progress</h3>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between text-sm text-gray-600 mb-1">
                                    <span class="translatable" data-key="completion">Completion</span>
                                    <span id="assessment-progress">0%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-blue-600 h-2 rounded-full" style="width: 0%" id="progress-bar"></div>
                                </div>
                            </div>
                            <div class="text-sm text-gray-600">
                                <p><span class="translatable" data-key="assessed">Assessed:</span> <span id="assessed-count">0</span></p>
                                <p><span class="translatable" data-key="remaining">Remaining:</span> <span id="remaining-count">0</span></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Assessment Grid -->
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider translatable" data-key="asset">Asset</th>
                                <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider translatable" data-key="safety">Safety</th>
                                <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider translatable" data-key="environmental">Environmental</th>
                                <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider translatable" data-key="production">Production</th>
                                <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider translatable" data-key="financial">Financial</th>
                                <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider translatable" data-key="quality">Quality</th>
                                <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider translatable" data-key="reputation">Reputation</th>
                                <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider translatable" data-key="tier">Tier</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200" id="assessment-table-body">
                            <!-- Dynamic content will be inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Reports Tab -->
        <div id="reports" class="tab-content">
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-2xl font-semibold text-gray-800 mb-6 translatable" data-key="report_generation">Report Generation</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Report Configuration -->
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 translatable" data-key="report_configuration">Report Configuration</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 translatable" data-key="report_type">Report Type</label>
                                <select id="report-type" class="w-full border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                                    <option value="comprehensive" class="translatable" data-key="comprehensive_assessment">Comprehensive Assessment Report</option>
                                    <option value="executive" class="translatable" data-key="executive_summary">Executive Summary</option>
                                    <option value="maintenance" class="translatable" data-key="maintenance_priority">Maintenance Priority List</option>
                                    <option value="department" class="translatable" data-key="department_specific">Department Specific</option>
                                    <option value="compliance" class="translatable" data-key="compliance_audit">Compliance Audit Report</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 translatable" data-key="include_assets">Include Assets</label>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="radio" name="asset-filter" value="all" checked class="mr-2">
                                        <span class="translatable" data-key="all_assets">All Assets</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="asset-filter" value="critical" class="mr-2">
                                        <span class="translatable" data-key="critical_assets_only">Critical Assets Only</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="asset-filter" value="selected" class="mr-2">
                                        <span class="translatable" data-key="selected_assets_only">Selected Assets Only</span>
                                    </label>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 translatable" data-key="company_info">Company Information</label>
                                <input type="text" id="company-name" placeholder="Company Name" class="w-full border-gray-300 rounded-lg mb-2 focus:ring-blue-500 focus:border-blue-500">
                                <input type="text" id="report-author" placeholder="Report Author" class="w-full border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Export Options -->
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 translatable" data-key="export_options">Export Options</h3>
                        <div class="space-y-4">
                            <button id="generate-pdf-btn" class="w-full bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-colors">
                                <i class="fas fa-file-pdf mr-2"></i><span class="translatable" data-key="generate_pdf">Generate PDF Report</span>
                            </button>
                            <button id="export-excel-btn" class="w-full bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors">
                                <i class="fas fa-file-excel mr-2"></i><span class="translatable" data-key="export_excel">Export to Excel</span>
                            </button>
                            <button id="export-csv-btn" class="w-full bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                                <i class="fas fa-file-csv mr-2"></i><span class="translatable" data-key="export_csv">Export to CSV</span>
                            </button>
                        </div>
                        
                        <!-- Action Plan Summary -->
                        <div class="mt-8">
                            <h4 class="text-md font-semibold text-gray-800 mb-3 translatable" data-key="action_plan_summary">Action Plan Summary</h4>
                            <div class="bg-gray-50 rounded-lg p-4">
                                <div class="space-y-2 text-sm" id="action-plan-summary">
                                    <!-- Dynamic content will be inserted here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings" class="tab-content">
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-2xl font-semibold text-gray-800 mb-6 translatable" data-key="settings">Settings</h2>
                
                <!-- Settings Navigation -->
                <div class="border-b border-gray-200 mb-6">
                    <nav class="-mb-px flex space-x-8 overflow-x-auto">
                        <button class="settings-tab-button py-2 px-1 border-b-2 border-blue-500 font-medium text-sm text-blue-600 whitespace-nowrap active" data-settings-tab="criteria">
                            <span class="translatable" data-key="criteria_customization">Criteria Customization</span>
                        </button>
                        <button class="settings-tab-button py-2 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap" data-settings-tab="weighting">
                            <span class="translatable" data-key="weighting_config">Weighting Configuration</span>
                        </button>
                        <button class="settings-tab-button py-2 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap" data-settings-tab="templates">
                            <span class="translatable" data-key="industry_templates">Industry Templates</span>
                        </button>
                        <button class="settings-tab-button py-2 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap" data-settings-tab="regional">
                            <span class="translatable" data-key="regional_settings">Regional Settings</span>
                        </button>
                    </nav>
                </div>

                <!-- Criteria Customization -->
                <div id="criteria" class="settings-tab-content active">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Criteria Type Selector -->
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800 mb-4 translatable" data-key="select_criteria_type">Select Criteria Type</h3>
                            <div class="space-y-2">
                                <button class="criteria-type-btn w-full text-left px-4 py-3 bg-blue-50 border-2 border-blue-200 rounded-lg hover:bg-blue-100 transition-colors active" data-criteria="safety">
                                    <i class="fas fa-shield-alt mr-3 text-blue-600"></i><span class="translatable" data-key="safety_impact">Safety Impact</span>
                                </button>
                                <button class="criteria-type-btn w-full text-left px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg hover:bg-gray-100 transition-colors" data-criteria="environmental">
                                    <i class="fas fa-leaf mr-3 text-green-600"></i><span class="translatable" data-key="environmental_impact">Environmental Impact</span>
                                </button>
                                <button class="criteria-type-btn w-full text-left px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg hover:bg-gray-100 transition-colors" data-criteria="production">
                                    <i class="fas fa-industry mr-3 text-orange-600"></i><span class="translatable" data-key="production_impact">Production Impact</span>
                                </button>
                                <button class="criteria-type-btn w-full text-left px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg hover:bg-gray-100 transition-colors" data-criteria="financial">
                                    <i class="fas fa-dollar-sign mr-3 text-yellow-600"></i><span class="translatable" data-key="financial_impact">Financial Impact</span>
                                </button>
                                <button class="criteria-type-btn w-full text-left px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg hover:bg-gray-100 transition-colors" data-criteria="quality">
                                    <i class="fas fa-star mr-3 text-purple-600"></i><span class="translatable" data-key="quality_impact">Quality Impact</span>
                                </button>
                                <button class="criteria-type-btn w-full text-left px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg hover:bg-gray-100 transition-colors" data-criteria="reputation">
                                    <i class="fas fa-handshake mr-3 text-red-600"></i><span class="translatable" data-key="reputation_impact">Reputation Impact</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Criteria Editor -->
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800 mb-4 translatable" data-key="edit_criteria_levels">Edit Criteria Levels</h3>
                            <div class="criteria-editor bg-gray-50 rounded-lg p-4">
                                <div id="criteria-levels-editor">
                                    <!-- Dynamic content will be inserted here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Weighting Configuration -->
                <div id="weighting" class="settings-tab-content">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Weight Sliders -->
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800 mb-4 translatable" data-key="adjust_weights">Adjust Criteria Weights</h3>
                            <div class="space-y-6">
                                <div class="weight-item" data-criteria="safety">
                                    <div class="flex justify-between items-center mb-2">
                                        <label class="text-sm font-medium text-gray-700 translatable" data-key="safety">Safety</label>
                                        <span class="weight-value text-sm font-medium text-gray-600">25%</span>
                                    </div>
                                    <input type="range" min="0" max="100" value="25" class="weight-slider" data-criteria="safety">
                                </div>
                                
                                <div class="weight-item" data-criteria="environmental">
                                    <div class="flex justify-between items-center mb-2">
                                        <label class="text-sm font-medium text-gray-700 translatable" data-key="environmental">Environmental</label>
                                        <span class="weight-value text-sm font-medium text-gray-600">20%</span>
                                    </div>
                                    <input type="range" min="0" max="100" value="20" class="weight-slider" data-criteria="environmental">
                                </div>
                                
                                <div class="weight-item" data-criteria="production">
                                    <div class="flex justify-between items-center mb-2">
                                        <label class="text-sm font-medium text-gray-700 translatable" data-key="production">Production</label>
                                        <span class="weight-value text-sm font-medium text-gray-600">25%</span>
                                    </div>
                                    <input type="range" min="0" max="100" value="25" class="weight-slider" data-criteria="production">
                                </div>
                                
                                <div class="weight-item" data-criteria="financial">
                                    <div class="flex justify-between items-center mb-2">
                                        <label class="text-sm font-medium text-gray-700 translatable" data-key="financial">Financial</label>
                                        <span class="weight-value text-sm font-medium text-gray-600">15%</span>
                                    </div>
                                    <input type="range" min="0" max="100" value="15" class="weight-slider" data-criteria="financial">
                                </div>
                                
                                <div class="weight-item" data-criteria="quality">
                                    <div class="flex justify-between items-center mb-2">
                                        <label class="text-sm font-medium text-gray-700 translatable" data-key="quality">Quality</label>
                                        <span class="weight-value text-sm font-medium text-gray-600">10%</span>
                                    </div>
                                    <input type="range" min="0" max="100" value="10" class="weight-slider" data-criteria="quality">
                                </div>
                                
                                <div class="weight-item" data-criteria="reputation">
                                    <div class="flex justify-between items-center mb-2">
                                        <label class="text-sm font-medium text-gray-700 translatable" data-key="reputation">Reputation</label>
                                        <span class="weight-value text-sm font-medium text-gray-600">5%</span>
                                    </div>
                                    <input type="range" min="0" max="100" value="5" class="weight-slider" data-criteria="reputation">
                                </div>
                                
                                <div class="pt-4 border-t">
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm font-medium text-gray-700 translatable" data-key="total_weight">Total Weight:</span>
                                        <span id="total-weight" class="text-sm font-bold text-gray-900">100%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Weight Distribution Chart -->
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800 mb-4 translatable" data-key="weight_distribution">Weight Distribution</h3>
                            <div style="height: 400px;">
                                <canvas id="weight-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Industry Templates -->
                <div id="templates" class="settings-tab-content">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Available Templates -->
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800 mb-4 translatable" data-key="industry_templates">Industry Templates</h3>
                            <div class="space-y-3">
                                <button class="template-btn w-full text-left px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg hover:bg-gray-100 transition-colors" data-template="manufacturing">
                                    <i class="fas fa-industry mr-3 text-blue-600"></i><span class="translatable" data-key="manufacturing">Manufacturing</span>
                                </button>
                                <button class="template-btn w-full text-left px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg hover:bg-gray-100 transition-colors" data-template="oil-gas">
                                    <i class="fas fa-fire mr-3 text-orange-600"></i><span class="translatable" data-key="oil_gas">Oil & Gas</span>
                                </button>
                                <button class="template-btn w-full text-left px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg hover:bg-gray-100 transition-colors" data-template="chemical">
                                    <i class="fas fa-flask mr-3 text-green-600"></i><span class="translatable" data-key="chemical">Chemical Processing</span>
                                </button>
                                <button class="template-btn w-full text-left px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg hover:bg-gray-100 transition-colors" data-template="pharmaceutical">
                                    <i class="fas fa-pills mr-3 text-purple-600"></i><span class="translatable" data-key="pharmaceutical">Pharmaceutical</span>
                                </button>
                                <button class="template-btn w-full text-left px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg hover:bg-gray-100 transition-colors" data-template="power">
                                    <i class="fas fa-bolt mr-3 text-yellow-600"></i><span class="translatable" data-key="power_generation">Power Generation</span>
                                </button>
                                <button class="template-btn w-full text-left px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg hover:bg-gray-100 transition-colors" data-template="water">
                                    <i class="fas fa-tint mr-3 text-blue-500"></i><span class="translatable" data-key="water_treatment">Water Treatment</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Template Actions -->
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800 mb-4 translatable" data-key="template_actions">Template Actions</h3>
                            <div class="space-y-4">
                                <button id="load-template-btn" class="w-full bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                                    <i class="fas fa-download mr-2"></i><span class="translatable" data-key="load_template">Load Template</span>
                                </button>
                                <button id="save-template-btn" class="w-full bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors">
                                    <i class="fas fa-save mr-2"></i><span class="translatable" data-key="save_custom_template">Save Custom Template</span>
                                </button>
                                <button id="export-config-btn" class="w-full bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors">
                                    <i class="fas fa-file-export mr-2"></i><span class="translatable" data-key="export_configuration">Export Configuration</span>
                                </button>
                                <button id="import-config-btn" class="w-full bg-orange-600 text-white px-6 py-3 rounded-lg hover:bg-orange-700 transition-colors">
                                    <i class="fas fa-file-import mr-2"></i><span class="translatable" data-key="import_configuration">Import Configuration</span>
                                </button>
                                <button id="reset-defaults-btn" class="w-full bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-colors">
                                    <i class="fas fa-undo mr-2"></i><span class="translatable" data-key="reset_to_defaults">Reset to Defaults</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Regional Settings -->
                <div id="regional" class="settings-tab-content">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Currency & Locale -->
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800 mb-4 translatable" data-key="currency_locale">Currency & Locale</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2 translatable" data-key="currency">Currency</label>
                                    <select id="currency-selector" class="w-full border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                                        <option value="USD">ðŸ‡ºðŸ‡¸ USD - US Dollar</option>
                                        <option value="EUR">ðŸ‡ªðŸ‡º EUR - Euro</option>
                                        <option value="GBP">ðŸ‡¬ðŸ‡§ GBP - British Pound</option>
                                        <option value="CAD">ðŸ‡¨ðŸ‡¦ CAD - Canadian Dollar</option>
                                        <option value="AUD">ðŸ‡¦ðŸ‡º AUD - Australian Dollar</option>
                                        <option value="JPY">ðŸ‡¯ðŸ‡µ JPY - Japanese Yen</option>
                                        <option value="CNY">ðŸ‡¨ðŸ‡³ CNY - Chinese Yuan</option>
                                        <option value="INR">ðŸ‡®ðŸ‡³ INR - Indian Rupee</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2 translatable" data-key="regulatory_framework">Regulatory Framework</label>
                                    <select id="regulatory-framework" class="w-full border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                                        <option value="OSHA">OSHA (USA)</option>
                                        <option value="HSE">HSE (UK)</option>
                                        <option value="DGUV">DGUV (Germany)</option>
                                        <option value="INSHT">INSHT (Spain)</option>
                                        <option value="INRS">INRS (France)</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2 translatable" data-key="date_format">Date Format</label>
                                    <select id="date-format" class="w-full border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                                        <option value="MM/DD/YYYY">MM/DD/YYYY (US)</option>
                                        <option value="DD/MM/YYYY">DD/MM/YYYY (UK/EU)</option>
                                        <option value="YYYY-MM-DD">YYYY-MM-DD (ISO)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Regional Templates -->
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800 mb-4 translatable" data-key="regional_templates">Regional Templates</h3>
                            <div class="space-y-3">
                                <button class="regional-template-btn w-full text-left px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg hover:bg-gray-100 transition-colors" data-region="north-america">
                                    <i class="fas fa-globe-americas mr-3 text-blue-600"></i><span class="translatable" data-key="north_america">North America</span>
                                </button>
                                <button class="regional-template-btn w-full text-left px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg hover:bg-gray-100 transition-colors" data-region="europe">
                                    <i class="fas fa-globe-europe mr-3 text-green-600"></i><span class="translatable" data-key="europe">Europe</span>
                                </button>
                                <button class="regional-template-btn w-full text-left px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg hover:bg-gray-100 transition-colors" data-region="asia-pacific">
                                    <i class="fas fa-globe-asia mr-3 text-orange-600"></i><span class="translatable" data-key="asia_pacific">Asia Pacific</span>
                                </button>
                                <button class="regional-template-btn w-full text-left px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg hover:bg-gray-100 transition-colors" data-region="latin-america">
                                    <i class="fas fa-globe mr-3 text-purple-600"></i><span class="translatable" data-key="latin_america">Latin America</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal for Asset Details -->
    <div id="asset-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-screen overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 translatable" data-key="asset_details">Asset Details</h3>
                    <button id="close-modal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <form id="asset-form" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1 translatable" data-key="asset_id">Asset ID</label>
                            <input type="text" id="asset-id" class="w-full border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1 translatable" data-key="asset_name">Asset Name</label>
                            <input type="text" id="asset-name" class="w-full border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1 translatable" data-key="type">Type</label>
                            <select id="asset-type" class="w-full border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" required>
                                <option value="">Select Type</option>
                                <option value="Rotating">Rotating</option>
                                <option value="Fixed">Fixed</option>
                                <option value="Mobile">Mobile</option>
                                <option value="Electrical">Electrical</option>
                                <option value="Instrumentation">Instrumentation</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1 translatable" data-key="location">Location</label>
                            <input type="text" id="asset-location" class="w-full border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1 translatable" data-key="manufacturer">Manufacturer</label>
                            <input type="text" id="asset-manufacturer" class="w-full border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1 translatable" data-key="model">Model</label>
                            <input type="text" id="asset-model" class="w-full border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1 translatable" data-key="install_date">Install Date</label>
                            <input type="date" id="asset-install-date" class="w-full border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1 translatable" data-key="description">Description</label>
                        <textarea id="asset-description" rows="3" class="w-full border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"></textarea>
                    </div>
                    
                    <!-- Criticality Assessment -->
                    <div class="border-t pt-6">
                        <h4 class="text-lg font-semibold text-gray-900 mb-4 translatable" data-key="criticality_assessment">Criticality Assessment</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 translatable" data-key="safety">Safety (1-10)</label>
                                <input type="range" id="safety-score" min="1" max="10" value="1" class="w-full">
                                <div class="text-center text-sm text-gray-600 mt-1">
                                    <span class="translatable" data-key="score">Score:</span> <span id="safety-value">1</span>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 translatable" data-key="environmental">Environmental (1-10)</label>
                                <input type="range" id="environmental-score" min="1" max="10" value="1" class="w-full">
                                <div class="text-center text-sm text-gray-600 mt-1">
                                    <span class="translatable" data-key="score">Score:</span> <span id="environmental-value">1</span>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 translatable" data-key="production">Production (1-10)</label>
                                <input type="range" id="production-score" min="1" max="10" value="1" class="w-full">
                                <div class="text-center text-sm text-gray-600 mt-1">
                                    <span class="translatable" data-key="score">Score:</span> <span id="production-value">1</span>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 translatable" data-key="financial">Financial (1-10)</label>
                                <input type="range" id="financial-score" min="1" max="10" value="1" class="w-full">
                                <div class="text-center text-sm text-gray-600 mt-1">
                                    <span class="translatable" data-key="score">Score:</span> <span id="financial-value">1</span>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 translatable" data-key="quality">Quality (1-10)</label>
                                <input type="range" id="quality-score" min="1" max="10" value="1" class="w-full">
                                <div class="text-center text-sm text-gray-600 mt-1">
                                    <span class="translatable" data-key="score">Score:</span> <span id="quality-value">1</span>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 translatable" data-key="reputation">Reputation (1-10)</label>
                                <input type="range" id="reputation-score" min="1" max="10" value="1" class="w-full">
                                <div class="text-center text-sm text-gray-600 mt-1">
                                    <span class="translatable" data-key="score">Score:</span> <span id="reputation-value">1</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                            <div class="flex justify-between items-center">
                                <span class="text-lg font-semibold text-gray-700 translatable" data-key="calculated_criticality">Calculated Criticality:</span>
                                <span id="calculated-criticality" class="text-2xl font-bold text-blue-600">0.0</span>
                            </div>
                            <div class="mt-2">
                                <span class="text-sm text-gray-600 translatable" data-key="tier">Tier:</span>
                                <span id="calculated-tier" class="text-sm font-medium ml-2 px-2 py-1 rounded bg-gray-200">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex justify-end space-x-3 pt-6">
                        <button type="button" id="cancel-asset" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">
                            <span class="translatable" data-key="cancel">Cancel</span>
                        </button>
                        <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                            <span class="translatable" data-key="save_asset">Save Asset</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- File input for imports (hidden) -->
    <input type="file" id="file-input" accept=".csv,.xlsx,.xls" style="display: none;">

    <script>
        // Multilingual support
        const translations = {
            en: {
                // Navigation
                dashboard: "Dashboard",
                asset_management: "Asset Management",
                batch_assessment: "Batch Assessment",
                reports: "Reports",
                settings: "Settings",
                
                // Dashboard
                total_assets: "Total Assets",
                critical_assets: "Critical Assets",
                assessed_assets: "Assessed Assets",
                criticality_distribution: "Criticality Distribution",
                maintenance_priority_matrix: "Maintenance Priority Matrix",
                tier: "Tier",
                criticality_level: "Criticality Level",
                maintenance_strategy: "Maintenance Strategy",
                monitoring_tools: "Monitoring Tools",
                
                // Asset Management
                import_assets: "Import Assets",
                download_template: "Download Template",
                add_asset: "Add Asset",
                import_instructions: "Import Instructions",
                asset_id_unique: "Asset ID must be unique",
                asset_name_required: "Asset Name is required",
                type_options: "Type must be one of: Rotating, Fixed, Mobile, Electrical, Instrumentation",
                location_specify: "Location should specify facility/area",
                optional_fields: "Optional fields: Description, Manufacturer, Model, Install Date",
                asset_id: "Asset ID",
                asset_name: "Asset Name",
                type: "Type",
                location: "Location",
                criticality: "Criticality",
                actions: "Actions",
                
                // Assessment
                bulk_operations: "Bulk Operations",
                bulk_scoring: "Bulk Scoring",
                apply_template: "Apply Template",
                reset_scores: "Reset Scores",
                assessment_progress: "Assessment Progress",
                completion: "Completion",
                assessed: "Assessed",
                remaining: "Remaining",
                asset: "Asset",
                safety: "Safety",
                environmental: "Environmental",
                production: "Production",
                financial: "Financial",
                quality: "Quality",
                reputation: "Reputation",
                
                // Reports
                report_generation: "Report Generation",
                report_configuration: "Report Configuration",
                report_type: "Report Type",
                comprehensive_assessment: "Comprehensive Assessment Report",
                executive_summary: "Executive Summary",
                maintenance_priority: "Maintenance Priority List",
                department_specific: "Department Specific",
                compliance_audit: "Compliance Audit Report",
                include_assets: "Include Assets",
                all_assets: "All Assets",
                critical_assets_only: "Critical Assets Only",
                selected_assets_only: "Selected Assets Only",
                company_info: "Company Information",
                export_options: "Export Options",
                generate_pdf: "Generate PDF Report",
                export_excel: "Export to Excel",
                export_csv: "Export to CSV",
                action_plan_summary: "Action Plan Summary",
                
                // Settings
                criteria_customization: "Criteria Customization",
                weighting_config: "Weighting Configuration",
                industry_templates: "Industry Templates",
                regional_settings: "Regional Settings",
                select_criteria_type: "Select Criteria Type",
                safety_impact: "Safety Impact",
                environmental_impact: "Environmental Impact",
                production_impact: "Production Impact",
                financial_impact: "Financial Impact",
                quality_impact: "Quality Impact",
                reputation_impact: "Reputation Impact",
                edit_criteria_levels: "Edit Criteria Levels",
                adjust_weights: "Adjust Criteria Weights",
                total_weight: "Total Weight",
                weight_distribution: "Weight Distribution",
                manufacturing: "Manufacturing",
                oil_gas: "Oil & Gas",
                chemical: "Chemical Processing",
                pharmaceutical: "Pharmaceutical",
                power_generation: "Power Generation",
                water_treatment: "Water Treatment",
                template_actions: "Template Actions",
                load_template: "Load Template",
                save_custom_template: "Save Custom Template",
                export_configuration: "Export Configuration",
                import_configuration: "Import Configuration",
                reset_to_defaults: "Reset to Defaults",
                currency_locale: "Currency & Locale",
                currency: "Currency",
                regulatory_framework: "Regulatory Framework",
                date_format: "Date Format",
                regional_templates: "Regional Templates",
                north_america: "North America",
                europe: "Europe",
                asia_pacific: "Asia Pacific",
                latin_america: "Latin America",
                
                // Modal
                asset_details: "Asset Details",
                manufacturer: "Manufacturer",
                model: "Model",
                install_date: "Install Date",
                description: "Description",
                criticality_assessment: "Criticality Assessment",
                score: "Score",
                calculated_criticality: "Calculated Criticality",
                cancel: "Cancel",
                save_asset: "Save Asset"
            },
            fr: {
                // Navigation
                dashboard: "Tableau de Bord",
                asset_management: "Gestion des Actifs",
                batch_assessment: "Ã‰valuation par Lots",
                reports: "Rapports",
                settings: "ParamÃ¨tres",
                
                // Dashboard
                total_assets: "Total des Actifs",
                critical_assets: "Actifs Critiques",
                assessed_assets: "Actifs Ã‰valuÃ©s",
                criticality_distribution: "Distribution de la CriticitÃ©",
                maintenance_priority_matrix: "Matrice de PrioritÃ© de Maintenance",
                tier: "Niveau",
                criticality_level: "Niveau de CriticitÃ©",
                maintenance_strategy: "StratÃ©gie de Maintenance",
                monitoring_tools: "Outils de Surveillance",
                
                // Asset Management
                import_assets: "Importer des Actifs",
                download_template: "TÃ©lÃ©charger le ModÃ¨le",
                add_asset: "Ajouter un Actif",
                import_instructions: "Instructions d'Importation",
                asset_id_unique: "L'ID d'actif doit Ãªtre unique",
                asset_name_required: "Le nom de l'actif est requis",
                type_options: "Le type doit Ãªtre l'un des suivants : Rotatif, Fixe, Mobile, Ã‰lectrique, Instrumentation",
                location_specify: "L'emplacement doit spÃ©cifier l'installation/zone",
                optional_fields: "Champs optionnels : Description, Fabricant, ModÃ¨le, Date d'installation",
                asset_id: "ID Actif",
                asset_name: "Nom de l'Actif",
                type: "Type",
                location: "Emplacement",
                criticality: "CriticitÃ©",
                actions: "Actions",
                
                // Assessment
                bulk_operations: "OpÃ©rations en Masse",
                bulk_scoring: "Notation en Masse",
                apply_template: "Appliquer le ModÃ¨le",
                reset_scores: "RÃ©initialiser les Scores",
                assessment_progress: "ProgrÃ¨s de l'Ã‰valuation",
                completion: "AchÃ¨vement",
                assessed: "Ã‰valuÃ©s",
                remaining: "Restants",
                asset: "Actif",
                safety: "SÃ©curitÃ©",
                environmental: "Environnemental",
                production: "Production",
                financial: "Financier",
                quality: "QualitÃ©",
                reputation: "RÃ©putation",
                
                // Reports
                report_generation: "GÃ©nÃ©ration de Rapports",
                report_configuration: "Configuration du Rapport",
                report_type: "Type de Rapport",
                comprehensive_assessment: "Rapport d'Ã‰valuation ComplÃ¨te",
                executive_summary: "RÃ©sumÃ© ExÃ©cutif",
                maintenance_priority: "Liste de PrioritÃ© de Maintenance",
                department_specific: "SpÃ©cifique au DÃ©partement",
                compliance_audit: "Rapport d'Audit de ConformitÃ©",
                include_assets: "Inclure les Actifs",
                all_assets: "Tous les Actifs",
                critical_assets_only: "Actifs Critiques Seulement",
                selected_assets_only: "Actifs SÃ©lectionnÃ©s Seulement",
                company_info: "Informations de l'Entreprise",
                export_options: "Options d'Exportation",
                generate_pdf: "GÃ©nÃ©rer un Rapport PDF",
                export_excel: "Exporter vers Excel",
                export_csv: "Exporter vers CSV",
                action_plan_summary: "RÃ©sumÃ© du Plan d'Action",
                
                // Settings
                criteria_customization: "Personnalisation des CritÃ¨res",
                weighting_config: "Configuration de PondÃ©ration",
                industry_templates: "ModÃ¨les d'Industrie",
                regional_settings: "ParamÃ¨tres RÃ©gionaux",
                select_criteria_type: "SÃ©lectionner le Type de CritÃ¨re",
                safety_impact: "Impact SÃ©curitÃ©",
                environmental_impact: "Impact Environnemental",
                production_impact: "Impact Production",
                financial_impact: "Impact Financier",
                quality_impact: "Impact QualitÃ©",
                reputation_impact: "Impact RÃ©putation",
                edit_criteria_levels: "Modifier les Niveaux de CritÃ¨res",
                adjust_weights: "Ajuster les Poids des CritÃ¨res",
                total_weight: "Poids Total",
                weight_distribution: "Distribution des Poids",
                manufacturing: "Fabrication",
                oil_gas: "PÃ©trole et Gaz",
                chemical: "Traitement Chimique",
                pharmaceutical: "Pharmaceutique",
                power_generation: "Production d'Ã‰nergie",
                water_treatment: "Traitement de l'Eau",
                template_actions: "Actions de ModÃ¨le",
                load_template: "Charger le ModÃ¨le",
                save_custom_template: "Sauvegarder le ModÃ¨le PersonnalisÃ©",
                export_configuration: "Exporter la Configuration",
                import_configuration: "Importer la Configuration",
                reset_to_defaults: "RÃ©initialiser aux Valeurs par DÃ©faut",
                currency_locale: "Devise et ParamÃ¨tres RÃ©gionaux",
                currency: "Devise",
                regulatory_framework: "Cadre RÃ©glementaire",
                date_format: "Format de Date",
                regional_templates: "ModÃ¨les RÃ©gionaux",
                north_america: "AmÃ©rique du Nord",
                europe: "Europe",
                asia_pacific: "Asie-Pacifique",
                latin_america: "AmÃ©rique Latine",
                
                // Modal
                asset_details: "DÃ©tails de l'Actif",
                manufacturer: "Fabricant",
                model: "ModÃ¨le",
                install_date: "Date d'Installation",
                description: "Description",
                criticality_assessment: "Ã‰valuation de la CriticitÃ©",
                score: "Score",
                calculated_criticality: "CriticitÃ© CalculÃ©e",
                cancel: "Annuler",
                save_asset: "Sauvegarder l'Actif"
            },
            de: {
                // Navigation
                dashboard: "Dashboard",
                asset_management: "Anlagenverwaltung",
                batch_assessment: "Stapelbewertung",
                reports: "Berichte",
                settings: "Einstellungen",
                
                // Dashboard
                total_assets: "Anlagen Gesamt",
                critical_assets: "Kritische Anlagen",
                assessed_assets: "Bewertete Anlagen",
                criticality_distribution: "KritikalitÃ¤tsverteilung",
                maintenance_priority_matrix: "WartungsprioritÃ¤tsmatrix",
                tier: "Stufe",
                criticality_level: "KritikalitÃ¤tsstufe",
                maintenance_strategy: "Wartungsstrategie",
                monitoring_tools: "Ãœberwachungstools",
                
                // Asset Management
                import_assets: "Anlagen Importieren",
                download_template: "Vorlage Herunterladen",
                add_asset: "Anlage HinzufÃ¼gen",
                import_instructions: "Import-Anweisungen",
                asset_id_unique: "Anlagen-ID muss eindeutig sein",
                asset_name_required: "Anlagenname ist erforderlich",
                type_options: "Typ muss einer der folgenden sein: Rotierend, Fest, Mobil, Elektrisch, Instrumentierung",
                location_specify: "Standort sollte Anlage/Bereich angeben",
                optional_fields: "Optionale Felder: Beschreibung, Hersteller, Modell, Installationsdatum",
                asset_id: "Anlagen-ID",
                asset_name: "Anlagenname",
                type: "Typ",
                location: "Standort",
                criticality: "KritikalitÃ¤t",
                actions: "Aktionen",
                
                // Assessment
                bulk_operations: "Massenoperationen",
                bulk_scoring: "Massenbewertung",
                apply_template: "Vorlage Anwenden",
                reset_scores: "Bewertungen ZurÃ¼cksetzen",
                assessment_progress: "Bewertungsfortschritt",
                completion: "Fertigstellung",
                assessed: "Bewertet",
                remaining: "Verbleibend",
                asset: "Anlage",
                safety: "Sicherheit",
                environmental: "Umwelt",
                production: "Produktion",
                financial: "Finanziell",
                quality: "QualitÃ¤t",
                reputation: "Reputation",
                
                // Reports
                report_generation: "Berichterstellung",
                report_configuration: "Berichtkonfiguration",
                report_type: "Berichttyp",
                comprehensive_assessment: "Umfassender Bewertungsbericht",
                executive_summary: "Zusammenfassung fÃ¼r FÃ¼hrungskrÃ¤fte",
                maintenance_priority: "WartungsprioritÃ¤tsliste",
                department_specific: "Abteilungsspezifisch",
                compliance_audit: "Compliance-PrÃ¼fbericht",
                include_assets: "Anlagen EinschlieÃŸen",
                all_assets: "Alle Anlagen",
                critical_assets_only: "Nur Kritische Anlagen",
                selected_assets_only: "Nur AusgewÃ¤hlte Anlagen",
                company_info: "Unternehmensinformationen",
                export_options: "Export-Optionen",
                generate_pdf: "PDF-Bericht Erstellen",
                export_excel: "Nach Excel Exportieren",
                export_csv: "Nach CSV Exportieren",
                action_plan_summary: "Aktionsplan-Zusammenfassung",
                
                // Settings
                criteria_customization: "Kriterien-Anpassung",
                weighting_config: "Gewichtungskonfiguration",
                industry_templates: "Branchenvorlagen",
                regional_settings: "Regionale Einstellungen",
                select_criteria_type: "Kriterientyp AuswÃ¤hlen",
                safety_impact: "Sicherheitsauswirkung",
                environmental_impact: "Umweltauswirkung",
                production_impact: "Produktionsauswirkung",
                financial_impact: "Finanzielle Auswirkung",
                quality_impact: "QualitÃ¤tsauswirkung",
                reputation_impact: "Reputationsauswirkung",
                edit_criteria_levels: "Kriterienstufen Bearbeiten",
                adjust_weights: "Kriteriengewichte Anpassen",
                total_weight: "Gesamtgewicht",
                weight_distribution: "Gewichtsverteilung",
                manufacturing: "Fertigung",
                oil_gas: "Ã–l und Gas",
                chemical: "Chemische Verarbeitung",
                pharmaceutical: "Pharmazeutisch",
                power_generation: "Stromerzeugung",
                water_treatment: "Wasserbehandlung",
                template_actions: "Vorlagen-Aktionen",
                load_template: "Vorlage Laden",
                save_custom_template: "Benutzerdefinierte Vorlage Speichern",
                export_configuration: "Konfiguration Exportieren",
                import_configuration: "Konfiguration Importieren",
                reset_to_defaults: "Auf Standard ZurÃ¼cksetzen",
                currency_locale: "WÃ¤hrung & Gebietsschema",
                currency: "WÃ¤hrung",
                regulatory_framework: "Regulatorischer Rahmen",
                date_format: "Datumsformat",
                regional_templates: "Regionale Vorlagen",
                north_america: "Nordamerika",
                europe: "Europa",
                asia_pacific: "Asien-Pazifik",
                latin_america: "Lateinamerika",
                
                // Modal
                asset_details: "Anlagendetails",
                manufacturer: "Hersteller",
                model: "Modell",
                install_date: "Installationsdatum",
                description: "Beschreibung",
                criticality_assessment: "KritikalitÃ¤tsbewertung",
                score: "Bewertung",
                calculated_criticality: "Berechnete KritikalitÃ¤t",
                cancel: "Abbrechen",
                save_asset: "Anlage Speichern"
            },
            es: {
                // Navigation
                dashboard: "Panel de Control",
                asset_management: "GestiÃ³n de Activos",
                batch_assessment: "EvaluaciÃ³n por Lotes",
                reports: "Informes",
                settings: "ConfiguraciÃ³n",
                
                // Dashboard
                total_assets: "Total de Activos",
                critical_assets: "Activos CrÃ­ticos",
                assessed_assets: "Activos Evaluados",
                criticality_distribution: "DistribuciÃ³n de Criticidad",
                maintenance_priority_matrix: "Matriz de Prioridad de Mantenimiento",
                tier: "Nivel",
                criticality_level: "Nivel de Criticidad",
                maintenance_strategy: "Estrategia de Mantenimiento",
                monitoring_tools: "Herramientas de Monitoreo",
                
                // Asset Management
                import_assets: "Importar Activos",
                download_template: "Descargar Plantilla",
                add_asset: "Agregar Activo",
                import_instructions: "Instrucciones de ImportaciÃ³n",
                asset_id_unique: "El ID del activo debe ser Ãºnico",
                asset_name_required: "El nombre del activo es requerido",
                type_options: "El tipo debe ser uno de: Rotativo, Fijo, MÃ³vil, ElÃ©ctrico, InstrumentaciÃ³n",
                location_specify: "La ubicaciÃ³n debe especificar instalaciÃ³n/Ã¡rea",
                optional_fields: "Campos opcionales: DescripciÃ³n, Fabricante, Modelo, Fecha de instalaciÃ³n",
                asset_id: "ID del Activo",
                asset_name: "Nombre del Activo",
                type: "Tipo",
                location: "UbicaciÃ³n",
                criticality: "Criticidad",
                actions: "Acciones",
                
                // Assessment
                bulk_operations: "Operaciones Masivas",
                bulk_scoring: "PuntuaciÃ³n Masiva",
                apply_template: "Aplicar Plantilla",
                reset_scores: "Restablecer Puntuaciones",
                assessment_progress: "Progreso de EvaluaciÃ³n",
                completion: "FinalizaciÃ³n",
                assessed: "Evaluados",
                remaining: "Restantes",
                asset: "Activo",
                safety: "Seguridad",
                environmental: "Ambiental",
                production: "ProducciÃ³n",
                financial: "Financiero",
                quality: "Calidad",
                reputation: "ReputaciÃ³n",
                
                // Reports
                report_generation: "GeneraciÃ³n de Informes",
                report_configuration: "ConfiguraciÃ³n del Informe",
                report_type: "Tipo de Informe",
                comprehensive_assessment: "Informe de EvaluaciÃ³n Integral",
                executive_summary: "Resumen Ejecutivo",
                maintenance_priority: "Lista de Prioridad de Mantenimiento",
                department_specific: "EspecÃ­fico del Departamento",
                compliance_audit: "Informe de AuditorÃ­a de Cumplimiento",
                include_assets: "Incluir Activos",
                all_assets: "Todos los Activos",
                critical_assets_only: "Solo Activos CrÃ­ticos",
                selected_assets_only: "Solo Activos Seleccionados",
                company_info: "InformaciÃ³n de la Empresa",
                export_options: "Opciones de ExportaciÃ³n",
                generate_pdf: "Generar Informe PDF",
                export_excel: "Exportar a Excel",
                export_csv: "Exportar a CSV",
                action_plan_summary: "Resumen del Plan de AcciÃ³n",
                
                // Settings
                criteria_customization: "PersonalizaciÃ³n de Criterios",
                weighting_config: "ConfiguraciÃ³n de PonderaciÃ³n",
                industry_templates: "Plantillas de Industria",
                regional_settings: "ConfiguraciÃ³n Regional",
                select_criteria_type: "Seleccionar Tipo de Criterio",
                safety_impact: "Impacto en Seguridad",
                environmental_impact: "Impacto Ambiental",
                production_impact: "Impacto en ProducciÃ³n",
                financial_impact: "Impacto Financiero",
                quality_impact: "Impacto en Calidad",
                reputation_impact: "Impacto en ReputaciÃ³n",
                edit_criteria_levels: "Editar Niveles de Criterios",
                adjust_weights: "Ajustar Pesos de Criterios",
                total_weight: "Peso Total",
                weight_distribution: "DistribuciÃ³n de Pesos",
                manufacturing: "Manufactura",
                oil_gas: "PetrÃ³leo y Gas",
                chemical: "Procesamiento QuÃ­mico",
                pharmaceutical: "FarmacÃ©utico",
                power_generation: "GeneraciÃ³n de EnergÃ­a",
                water_treatment: "Tratamiento de Agua",
                template_actions: "Acciones de Plantilla",
                load_template: "Cargar Plantilla",
                save_custom_template: "Guardar Plantilla Personalizada",
                export_configuration: "Exportar ConfiguraciÃ³n",
                import_configuration: "Importar ConfiguraciÃ³n",
                reset_to_defaults: "Restablecer a Valores Predeterminados",
                currency_locale: "Moneda y ConfiguraciÃ³n Regional",
                currency: "Moneda",
                regulatory_framework: "Marco Regulatorio",
                date_format: "Formato de Fecha",
                regional_templates: "Plantillas Regionales",
                north_america: "AmÃ©rica del Norte",
                europe: "Europa",
                asia_pacific: "Asia PacÃ­fico",
                latin_america: "AmÃ©rica Latina",
                
                // Modal
                asset_details: "Detalles del Activo",
                manufacturer: "Fabricante",
                model: "Modelo",
                install_date: "Fecha de InstalaciÃ³n",
                description: "DescripciÃ³n",
                criticality_assessment: "EvaluaciÃ³n de Criticidad",
                score: "PuntuaciÃ³n",
                calculated_criticality: "Criticidad Calculada",
                cancel: "Cancelar",
                save_asset: "Guardar Activo"
            }
        };

        // Global variables
        let currentLanguage = 'en';
        let assets = [];
        let currentCriteria = 'safety';
        let criteriaSettings = {
            safety: {
                1: "No safety impact",
                2: "Minor injury potential (first aid)",
                3: "OSHA recordable injury potential",
                4: "Lost time injury potential",
                5: "Serious injury potential",
                6: "Multiple injury potential",
                7: "Permanent disability potential",
                8: "Life-threatening injury potential",
                9: "Single fatality potential",
                10: "Multiple fatality potential"
            },
            environmental: {
                1: "No environmental impact",
                2: "Minor on-site contained release",
                3: "On-site release below reportable quantity",
                4: "On-site contained release above reportable quantity",
                5: "Uncontained release above reportable quantity",
                6: "Release affecting local area",
                7: "Release affecting surrounding community",
                8: "Release affecting off-site vegetation",
                9: "Release affecting waterways",
                10: "Major environmental catastrophe"
            },
            production: {
                1: "No production impact",
                2: "Minor production delay (<1 hour)",
                3: "Short production impact (1-4 hours)",
                4: "Moderate production impact (4-8 hours)",
                5: "Significant production impact (8-24 hours)",
                6: "Major production loss (1-2 days)",
                7: "Extended production shutdown (2-7 days)",
                8: "Long-term shutdown (1-4 weeks)",
                9: "Extended shutdown (1-3 months)",
                10: "Permanent production loss"
            },
            financial: {
                1: "<$1,000 impact",
                2: "$1,000-$5,000 impact",
                3: "$5,000-$25,000 impact",
                4: "$25,000-$100,000 impact",
                5: "$100,000-$500,000 impact",
                6: "$500,000-$1,000,000 impact",
                7: "$1,000,000-$5,000,000 impact",
                8: "$5,000,000-$25,000,000 impact",
                9: "$25,000,000-$100,000,000 impact",
                10: ">$100,000,000 impact"
            },
            quality: {
                1: "No quality impact",
                2: "Minor quality deviation (internal)",
                3: "Quality impact requiring monitoring",
                4: "Quality impact requiring rework",
                5: "Product specification deviation",
                6: "Customer complaint potential",
                7: "Product recall potential",
                8: "Regulatory non-compliance",
                9: "Product safety impact",
                10: "Customer safety/product efficacy impact"
            },
            reputation: {
                1: "No reputation impact",
                2: "Internal complaint",
                3: "Minor customer complaint",
                4: "Moderate customer complaint",
                5: "Public complaint/media attention",
                6: "Customer contract penalty",
                7: "Loss of customer confidence",
                8: "Loss of major customer",
                9: "Industry reputation damage",
                10: "Brand damage/public relations crisis"
            }
        };
        let criteriaWeights = {
            safety: 25,
            environmental: 20,
            production: 25,
            financial: 15,
            quality: 10,
            reputation: 5
        };

        // Initialize application
        document.addEventListener('DOMContentLoaded', function() {
            initializeLanguage();
            initializeTabs();
            initializeSettings();
            initializeCharts();
            initializeEventListeners();
            updateDashboard();
            loadCriteriaEditor();
        });

        function initializeLanguage() {
            const languageSelector = document.getElementById('language-selector');
            languageSelector.addEventListener('change', function() {
                currentLanguage = this.value;
                updateLanguage();
                localStorage.setItem('selectedLanguage', currentLanguage);
            });

            // Load saved language
            const savedLanguage = localStorage.getItem('selectedLanguage');
            if (savedLanguage) {
                currentLanguage = savedLanguage;
                languageSelector.value = currentLanguage;
            }
            updateLanguage();
        }

        function updateLanguage() {
            const elements = document.querySelectorAll('.translatable');
            elements.forEach(element => {
                const key = element.getAttribute('data-key');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    element.textContent = translations[currentLanguage][key];
                }
            });

            // Update title
            document.getElementById('main-title').textContent = 
                currentLanguage === 'en' ? 'Equipment Criticality Assessment System' :
                currentLanguage === 'fr' ? 'SystÃ¨me d\'Ã‰valuation de la CriticitÃ© des Ã‰quipements' :
                currentLanguage === 'de' ? 'System zur Bewertung der AnlagenkritikalitÃ¤t' :
                'Sistema de EvaluaciÃ³n de Criticidad de Equipos';

            // Update charts
            updateCharts();
        }

        function initializeTabs() {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-tab');

                    // Remove active class from all buttons and contents
                    tabButtons.forEach(btn => btn.classList.remove('active', 'bg-blue-800'));
                    tabContents.forEach(content => content.classList.remove('active'));

                    // Add active class to clicked button and corresponding content
                    this.classList.add('active', 'bg-blue-800');
                    document.getElementById(targetTab).classList.add('active');

                    // Update specific content based on tab
                    if (targetTab === 'dashboard') {
                        updateDashboard();
                    } else if (targetTab === 'assets') {
                        updateAssetsTable();
                    } else if (targetTab === 'assessment') {
                        updateAssessmentTable();
                    } else if (targetTab === 'reports') {
                        updateActionPlanSummary();
                    }
                });
            });

            // Settings tabs
            const settingsTabButtons = document.querySelectorAll('.settings-tab-button');
            const settingsTabContents = document.querySelectorAll('.settings-tab-content');

            settingsTabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-settings-tab');

                    // Remove active class from all buttons and contents
                    settingsTabButtons.forEach(btn => {
                        btn.classList.remove('active', 'border-blue-500', 'text-blue-600');
                        btn.classList.add('border-transparent', 'text-gray-500');
                    });
                    settingsTabContents.forEach(content => content.classList.remove('active'));

                    // Add active class to clicked button and corresponding content
                    this.classList.remove('border-transparent', 'text-gray-500');
                    this.classList.add('active', 'border-blue-500', 'text-blue-600');
                    document.getElementById(targetTab).classList.add('active');

                    if (targetTab === 'weighting') {
                        updateWeightChart();
                    }
                });
            });
        }

        function initializeSettings() {
            // Criteria type buttons
            const criteriaTypeButtons = document.querySelectorAll('.criteria-type-btn');
            criteriaTypeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const criteriaType = this.getAttribute('data-criteria');
                    
                    // Remove active class from all buttons
                    criteriaTypeButtons.forEach(btn => {
                        btn.classList.remove('active', 'bg-blue-50', 'border-blue-200');
                        btn.classList.add('bg-gray-50', 'border-gray-200');
                    });
                    
                    // Add active class to clicked button
                    this.classList.remove('bg-gray-50', 'border-gray-200');
                    this.classList.add('active', 'bg-blue-50', 'border-blue-200');
                    
                    currentCriteria = criteriaType;
                    loadCriteriaEditor();
                });
            });

            // Weight sliders
            const weightSliders = document.querySelectorAll('.weight-slider');
            weightSliders.forEach(slider => {
                slider.addEventListener('input', function() {
                    const criteria = this.getAttribute('data-criteria');
                    const value = parseInt(this.value);
                    criteriaWeights[criteria] = value;
                    
                    // Update display
                    const weightItem = this.closest('.weight-item');
                    const weightValue = weightItem.querySelector('.weight-value');
                    weightValue.textContent = value + '%';
                    
                    updateTotalWeight();
                    updateWeightChart();
                });
            });
        }

        function loadCriteriaEditor() {
            const editor = document.getElementById('criteria-levels-editor');
            const criteria = criteriaSettings[currentCriteria];
            
            let html = '';
            for (let level = 1; level <= 10; level++) {
                html += `
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Level ${level}</label>
                        <textarea 
                            class="w-full border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-sm" 
                            rows="2" 
                            data-level="${level}"
                            placeholder="Enter description for level ${level}"
                        >${criteria[level] || ''}</textarea>
                    </div>
                `;
            }
            
            editor.innerHTML = html;

            // Add event listeners to textareas
            const textareas = editor.querySelectorAll('textarea');
            textareas.forEach(textarea => {
                textarea.addEventListener('input', function() {
                    const level = this.getAttribute('data-level');
                    criteriaSettings[currentCriteria][level] = this.value;
                });
            });
        }

        function updateTotalWeight() {
            const total = Object.values(criteriaWeights).reduce((sum, weight) => sum + weight, 0);
            document.getElementById('total-weight').textContent = total + '%';
            
            // Update total weight color based on whether it equals 100%
            const totalElement = document.getElementById('total-weight');
            if (total === 100) {
                totalElement.classList.remove('text-red-600');
                totalElement.classList.add('text-green-600');
            } else {
                totalElement.classList.remove('text-green-600');
                totalElement.classList.add('text-red-600');
            }
        }

        function initializeCharts() {
            // Initialize criticality distribution chart
            const criticalityCtx = document.getElementById('criticality-chart');
            if (criticalityCtx) {
                window.criticalityChart = new Chart(criticalityCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Tier 1 (Critical)', 'Tier 2 (High)', 'Tier 3 (Medium)', 'Tier 4 (Low)'],
                        datasets: [{
                            data: [0, 0, 0, 0],
                            backgroundColor: ['#DC2626', '#F59E0B', '#10B981', '#6B7280'],
                            borderWidth: 2,
                            borderColor: '#fff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }

            // Initialize weight distribution chart
            const weightCtx = document.getElementById('weight-chart');
            if (weightCtx) {
                window.weightChart = new Chart(weightCtx, {
                    type: 'pie',
                    data: {
                        labels: ['Safety', 'Environmental', 'Production', 'Financial', 'Quality', 'Reputation'],
                        datasets: [{
                            data: [25, 20, 25, 15, 10, 5],
                            backgroundColor: [
                                '#EF4444', '#10B981', '#F59E0B', 
                                '#3B82F6', '#8B5CF6', '#F97316'
                            ],
                            borderWidth: 2,
                            borderColor: '#fff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }
        }

        function updateCharts() {
            updateCriticalityChart();
            updateWeightChart();
        }

        function updateCriticalityChart() {
            if (window.criticalityChart) {
                const tierCounts = [0, 0, 0, 0];
                assets.forEach(asset => {
                    if (asset.tier) {
                        const tierIndex = parseInt(asset.tier) - 1;
                        if (tierIndex >= 0 && tierIndex < 4) {
                            tierCounts[tierIndex]++;
                        }
                    }
                });

                window.criticalityChart.data.datasets[0].data = tierCounts;
                window.criticalityChart.update();
            }
        }

        function updateWeightChart() {
            if (window.weightChart) {
                const labels = Object.keys(criteriaWeights).map(key => 
                    translations[currentLanguage][key] || key
                );
                const data = Object.values(criteriaWeights);

                window.weightChart.data.labels = labels;
                window.weightChart.data.datasets[0].data = data;
                window.weightChart.update();
            }
        }

        function initializeEventListeners() {
            // Asset management buttons
            document.getElementById('import-assets-btn').addEventListener('click', function() {
                document.getElementById('file-input').click();
            });

            document.getElementById('download-template-btn').addEventListener('click', downloadTemplate);
            document.getElementById('add-asset-btn').addEventListener('click', showAssetModal);

            // File input for import
            document.getElementById('file-input').addEventListener('change', handleFileImport);

            // Modal controls
            document.getElementById('close-modal').addEventListener('click', hideAssetModal);
            document.getElementById('cancel-asset').addEventListener('click', hideAssetModal);
            document.getElementById('asset-form').addEventListener('submit', handleAssetSave);

            // Score sliders in modal
            const scoreSliders = ['safety', 'environmental', 'production', 'financial', 'quality', 'reputation'];
            scoreSliders.forEach(criteria => {
                const slider = document.getElementById(criteria + '-score');
                const valueDisplay = document.getElementById(criteria + '-value');
                
                slider.addEventListener('input', function() {
                    valueDisplay.textContent = this.value;
                    updateCalculatedCriticality();
                });
            });

            // Report generation buttons
            document.getElementById('generate-pdf-btn').addEventListener('click', generatePDFReport);
            document.getElementById('export-excel-btn').addEventListener('click', exportToExcel);
            document.getElementById('export-csv-btn').addEventListener('click', exportToCSV);

            // Bulk operations
            document.getElementById('bulk-score-btn').addEventListener('click', showBulkScoreModal);
            document.getElementById('apply-template-btn').addEventListener('click', showTemplateModal);
            document.getElementById('reset-scores-btn').addEventListener('click', resetAllScores);

            // Template buttons
            document.getElementById('load-template-btn').addEventListener('click', loadSelectedTemplate);
            document.getElementById('save-template-btn').addEventListener('click', saveCustomTemplate);
            document.getElementById('export-config-btn').addEventListener('click', exportConfiguration);
            document.getElementById('import-config-btn').addEventListener('click', importConfiguration);
            document.getElementById('reset-defaults-btn').addEventListener('click', resetToDefaults);
        }

        function downloadTemplate() {
            const headers = [
                'Asset ID', 'Asset Name', 'Type', 'Location', 'Manufacturer', 
                'Model', 'Install Date', 'Description', 'Safety Score', 
                'Environmental Score', 'Production Score', 'Financial Score', 
                'Quality Score', 'Reputation Score'
            ];
            
            const csvContent = headers.join(',') + '\n' +
                'PUMP-001,Main Feed Pump,Rotating,Plant A - Area 1,ABC Corp,Model XYZ,2020-01-15,Primary feed water pump,7,5,8,6,4,3\n' +
                'TANK-002,Storage Tank,Fixed,Plant A - Area 2,DEF Corp,Model ABC,2019-06-20,Chemical storage tank,9,8,7,7,6,5';
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'asset_import_template.csv';
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function handleFileImport(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                const content = e.target.result;
                parseCSVContent(content);
            };
            reader.readAsText(file);
        }

        function parseCSVContent(content) {
            const lines = content.split('\n');
            const headers = lines[0].split(',').map(h => h.trim());
            
            const newAssets = [];
            for (let i = 1; i < lines.length; i++) {
                if (lines[i].trim() === '') continue;
                
                const values = lines[i].split(',').map(v => v.trim());
                const asset = {
                    id: values[0] || `ASSET-${Date.now()}-${i}`,
                    name: values[1] || 'Unnamed Asset',
                    type: values[2] || 'Rotating',
                    location: values[3] || 'Unknown',
                    manufacturer: values[4] || '',
                    model: values[5] || '',
                    installDate: values[6] || '',
                    description: values[7] || '',
                    scores: {
                        safety: parseInt(values[8]) || 1,
                        environmental: parseInt(values[9]) || 1,
                        production: parseInt(values[10]) || 1,
                        financial: parseInt(values[11]) || 1,
                        quality: parseInt(values[12]) || 1,
                        reputation: parseInt(values[13]) || 1
                    },
                    criticality: 0,
                    tier: 4
                };
                
                asset.criticality = calculateCriticality(asset.scores);
                asset.tier = calculateTier(asset.criticality);
                newAssets.push(asset);
            }
            
            assets = assets.concat(newAssets);
            updateAllTables();
            updateDashboard();
            
            // Clear file input
            event.target.value = '';
        }

        function showAssetModal(asset = null) {
            const modal = document.getElementById('asset-modal');
            const form = document.getElementById('asset-form');
            
            if (asset) {
                // Edit mode
                document.getElementById('asset-id').value = asset.id;
                document.getElementById('asset-name').value = asset.name;
                document.getElementById('asset-type').value = asset.type;
                document.getElementById('asset-location').value = asset.location;
                document.getElementById('asset-manufacturer').value = asset.manufacturer || '';
                document.getElementById('asset-model').value = asset.model || '';
                document.getElementById('asset-install-date').value = asset.installDate || '';
                document.getElementById('asset-description').value = asset.description || '';
                
                // Set scores
                Object.keys(asset.scores).forEach(criteria => {
                    document.getElementById(criteria + '-score').value = asset.scores[criteria];
                    document.getElementById(criteria + '-value').textContent = asset.scores[criteria];
                });
                
                form.setAttribute('data-edit-id', asset.id);
            } else {
                // Add mode
                form.reset();
                form.removeAttribute('data-edit-id');
                
                // Reset scores to 1
                ['safety', 'environmental', 'production', 'financial', 'quality', 'reputation'].forEach(criteria => {
                    document.getElementById(criteria + '-score').value = 1;
                    document.getElementById(criteria + '-value').textContent = 1;
                });
            }
            
            updateCalculatedCriticality();
            modal.classList.remove('hidden');
        }

        function hideAssetModal() {
            document.getElementById('asset-modal').classList.add('hidden');
        }

        function handleAssetSave(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const editId = event.target.getAttribute('data-edit-id');
            
            const asset = {
                id: document.getElementById('asset-id').value,
                name: document.getElementById('asset-name').value,
                type: document.getElementById('asset-type').value,
                location: document.getElementById('asset-location').value,
                manufacturer: document.getElementById('asset-manufacturer').value,
                model: document.getElementById('asset-model').value,
                installDate: document.getElementById('asset-install-date').value,
                description: document.getElementById('asset-description').value,
                scores: {
                    safety: parseInt(document.getElementById('safety-score').value),
                    environmental: parseInt(document.getElementById('environmental-score').value),
                    production: parseInt(document.getElementById('production-score').value),
                    financial: parseInt(document.getElementById('financial-score').value),
                    quality: parseInt(document.getElementById('quality-score').value),
                    reputation: parseInt(document.getElementById('reputation-score').value)
                }
            };
            
            asset.criticality = calculateCriticality(asset.scores);
            asset.tier = calculateTier(asset.criticality);
            
            if (editId) {
                // Edit existing asset
                const index = assets.findIndex(a => a.id === editId);
                if (index !== -1) {
                    assets[index] = asset;
                }
            } else {
                // Add new asset
                assets.push(asset);
            }
            
            updateAllTables();
            updateDashboard();
            hideAssetModal();
        }

        function calculateCriticality(scores) {
            let weightedSum = 0;
            let totalWeight = 0;
            
            Object.keys(scores).forEach(criteria => {
                const weight = criteriaWeights[criteria] || 0;
                weightedSum += scores[criteria] * weight;
                totalWeight += weight;
            });
            
            return totalWeight > 0 ? (weightedSum / totalWeight).toFixed(1) : 0;
        }

        function calculateTier(criticality) {
            const score = parseFloat(criticality);
            if (score >= 8) return 1; // Critical
            if (score >= 6) return 2; // High
            if (score >= 4) return 3; // Medium
            return 4; // Low
        }

        function updateCalculatedCriticality() {
            const scores = {
                safety: parseInt(document.getElementById('safety-score').value),
                environmental: parseInt(document.getElementById('environmental-score').value),
                production: parseInt(document.getElementById('production-score').value),
                financial: parseInt(document.getElementById('financial-score').value),
                quality: parseInt(document.getElementById('quality-score').value),
                reputation: parseInt(document.getElementById('reputation-score').value)
            };
            
            const criticality = calculateCriticality(scores);
            const tier = calculateTier(criticality);
            
            document.getElementById('calculated-criticality').textContent = criticality;
            
            const tierElement = document.getElementById('calculated-tier');
            const tierColors = {
                1: 'bg-red-200 text-red-800',
                2: 'bg-orange-200 text-orange-800',
                3: 'bg-yellow-200 text-yellow-800',
                4: 'bg-green-200 text-green-800'
            };
            
            tierElement.className = `text-sm font-medium ml-2 px-2 py-1 rounded ${tierColors[tier]}`;
            tierElement.textContent = `Tier ${tier}`;
        }

        function updateDashboard() {
            // Update stats
            document.getElementById('total-assets-count').textContent = assets.length;
            
            const criticalAssets = assets.filter(asset => asset.tier === 1).length;
            document.getElementById('critical-assets-count').textContent = criticalAssets;
            
            const assessedAssets = assets.filter(asset => asset.criticality > 0).length;
            document.getElementById('assessed-assets-count').textContent = assessedAssets;
            
            // Update charts
            updateCriticalityChart();
            
            // Update priority matrix
            updatePriorityMatrix();
        }

        function updatePriorityMatrix() {
            const tbody = document.getElementById('priority-matrix-body');
            const tierInfo = [
                {
                    tier: 1,
                    level: 'Critical (8.0-10.0)',
                    strategy: 'Predictive Maintenance, Real-time Monitoring, Redundancy',
                    tools: 'Vibration Analysis, Thermal Imaging, Oil Analysis, Online Monitoring'
                },
                {
                    tier: 2,
                    level: 'High (6.0-7.9)',
                    strategy: 'Risk-based Inspections, Scheduled PdM, Enhanced PM',
                    tools: 'Periodic Vibration, IR Thermography, Performance Trending'
                },
                {
                    tier: 3,
                    level: 'Medium (4.0-5.9)',
                    strategy: 'Standard Preventive Maintenance, Basic Monitoring',
                    tools: 'Visual Inspections, Basic Performance Checks, Operator Care'
                },
                {
                    tier: 4,
                    level: 'Low (1.0-3.9)',
                    strategy: 'Run-to-Failure, Minimal Intervention',
                    tools: 'Safety Checks Only, Emergency Repairs When Needed'
                }
            ];
            
            let html = '';
            tierInfo.forEach(info => {
                const count = assets.filter(asset => asset.tier === info.tier).length;
                const tierColors = {
                    1: 'bg-red-100 text-red-800',
                    2: 'bg-orange-100 text-orange-800',
                    3: 'bg-yellow-100 text-yellow-800',
                    4: 'bg-green-100 text-green-800'
                };
                
                html += `
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${tierColors[info.tier]}">
                                Tier ${info.tier} (${count})
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${info.level}</td>
                        <td class="px-6 py-4 text-sm text-gray-900">${info.strategy}</td>
                        <td class="px-6 py-4 text-sm text-gray-900">${info.tools}</td>
                    </tr>
                `;
            });
            
            tbody.innerHTML = html;
        }

        function updateAssetsTable() {
            const tbody = document.getElementById('assets-table-body');
            
            let html = '';
            assets.forEach(asset => {
                const tierColors = {
                    1: 'bg-red-100 text-red-800',
                    2: 'bg-orange-100 text-orange-800',
                    3: 'bg-yellow-100 text-yellow-800',
                    4: 'bg-green-100 text-green-800'
                };
                
                html += `
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <input type="checkbox" class="asset-checkbox rounded" data-asset-id="${asset.id}">
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${asset.id}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${asset.name}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${asset.type}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${asset.location}</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${tierColors[asset.tier]}">
                                ${asset.criticality} (Tier ${asset.tier})
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                            <button onclick="editAsset('${asset.id}')" class="text-indigo-600 hover:text-indigo-900 mr-3">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="deleteAsset('${asset.id}')" class="text-red-600 hover:text-red-900">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            tbody.innerHTML = html;
        }

        function updateAssessmentTable() {
            const tbody = document.getElementById('assessment-table-body');
            
            let html = '';
            assets.forEach(asset => {
                const tierColors = {
                    1: 'bg-red-100 text-red-800',
                    2: 'bg-orange-100 text-orange-800',
                    3: 'bg-yellow-100 text-yellow-800',
                    4: 'bg-green-100 text-green-800'
                };
                
                html += `
                    <tr>
                        <td class="px-4 py-3 text-sm font-medium text-gray-900">${asset.name}</td>
                        <td class="px-4 py-3 text-center">
                            <input type="range" min="1" max="10" value="${asset.scores.safety}" 
                                   class="score-slider w-16" data-asset-id="${asset.id}" data-criteria="safety">
                            <div class="text-xs text-gray-600 mt-1">${asset.scores.safety}</div>
                        </td>
                        <td class="px-4 py-3 text-center">
                            <input type="range" min="1" max="10" value="${asset.scores.environmental}" 
                                   class="score-slider w-16" data-asset-id="${asset.id}" data-criteria="environmental">
                            <div class="text-xs text-gray-600 mt-1">${asset.scores.environmental}</div>
                        </td>
                        <td class="px-4 py-3 text-center">
                            <input type="range" min="1" max="10" value="${asset.scores.production}" 
                                   class="score-slider w-16" data-asset-id="${asset.id}" data-criteria="production">
                            <div class="text-xs text-gray-600 mt-1">${asset.scores.production}</div>
                        </td>
                        <td class="px-4 py-3 text-center">
                            <input type="range" min="1" max="10" value="${asset.scores.financial}" 
                                   class="score-slider w-16" data-asset-id="${asset.id}" data-criteria="financial">
                            <div class="text-xs text-gray-600 mt-1">${asset.scores.financial}</div>
                        </td>
                        <td class="px-4 py-3 text-center">
                            <input type="range" min="1" max="10" value="${asset.scores.quality}" 
                                   class="score-slider w-16" data-asset-id="${asset.id}" data-criteria="quality">
                            <div class="text-xs text-gray-600 mt-1">${asset.scores.quality}</div>
                        </td>
                        <td class="px-4 py-3 text-center">
                            <input type="range" min="1" max="10" value="${asset.scores.reputation}" 
                                   class="score-slider w-16" data-asset-id="${asset.id}" data-criteria="reputation">
                            <div class="text-xs text-gray-600 mt-1">${asset.scores.reputation}</div>
                        </td>
                        <td class="px-4 py-3 text-center">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${tierColors[asset.tier]}">
                                Tier ${asset.tier}
                            </span>
                        </td>
                    </tr>
                `;
            });
            
            tbody.innerHTML = html;

            // Add event listeners to score sliders
            const scoreSliders = document.querySelectorAll('.score-slider');
            scoreSliders.forEach(slider => {
                slider.addEventListener('input', function() {
                    const assetId = this.getAttribute('data-asset-id');
                    const criteria = this.getAttribute('data-criteria');
                    const value = parseInt(this.value);
                    
                    // Update asset score
                    const asset = assets.find(a => a.id === assetId);
                    if (asset) {
                        asset.scores[criteria] = value;
                        asset.criticality = calculateCriticality(asset.scores);
                        asset.tier = calculateTier(asset.criticality);
                        
                        // Update display
                        const scoreDisplay = this.nextElementSibling;
                        scoreDisplay.textContent = value;
                        
                        // Update tier display in the same row
                        const row = this.closest('tr');
                        const tierCell = row.cells[7];
                        const tierColors = {
                            1: 'bg-red-100 text-red-800',
                            2: 'bg-orange-100 text-orange-800',
                            3: 'bg-yellow-100 text-yellow-800',
                            4: 'bg-green-100 text-green-800'
                        };
                        tierCell.innerHTML = `
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${tierColors[asset.tier]}">
                                Tier ${asset.tier}
                            </span>
                        `;
                        
                        updateAssessmentProgress();
                        updateDashboard();
                    }
                });
            });
            
            updateAssessmentProgress();
        }

        function updateAssessmentProgress() {
            const totalAssets = assets.length;
            const assessedAssets = assets.filter(asset => {
                return Object.values(asset.scores).some(score => score > 1);
            }).length;
            
            const progress = totalAssets > 0 ? Math.round((assessedAssets / totalAssets) * 100) : 0;
            
            document.getElementById('assessment-progress').textContent = progress + '%';
            document.getElementById('progress-bar').style.width = progress + '%';
            document.getElementById('assessed-count').textContent = assessedAssets;
            document.getElementById('remaining-count').textContent = totalAssets - assessedAssets;
        }

        function updateActionPlanSummary() {
            const summary = document.getElementById('action-plan-summary');
            const tierCounts = [0, 0, 0, 0];
            
            assets.forEach(asset => {
                if (asset.tier >= 1 && asset.tier <= 4) {
                    tierCounts[asset.tier - 1]++;
                }
            });
            
            const actionPlans = [
                {
                    tier: 1,
                    count: tierCounts[0],
                    title: 'Tier 1 - Critical Assets',
                    actions: [
                        'Implement predictive maintenance programs',
                        'Install real-time monitoring systems',
                        'Conduct monthly condition assessments',
                        'Maintain emergency spare parts inventory',
                        'Perform root cause analysis on all failures'
                    ]
                },
                {
                    tier: 2,
                    count: tierCounts[1],
                    title: 'Tier 2 - High Priority Assets',
                    actions: [
                        'Conduct risk-based inspections quarterly',
                        'Implement scheduled predictive maintenance',
                        'Monitor performance trends monthly',
                        'Maintain standard spare parts inventory'
                    ]
                },
                {
                    tier: 3,
                    count: tierCounts[2],
                    title: 'Tier 3 - Medium Priority Assets',
                    actions: [
                        'Follow standard preventive maintenance schedules',
                        'Conduct visual inspections monthly',
                        'Monitor basic performance parameters',
                        'Maintain minimal spare parts inventory'
                    ]
                },
                {
                    tier: 4,
                    count: tierCounts[3],
                    title: 'Tier 4 - Low Priority Assets',
                    actions: [
                        'Run to failure strategy',
                        'Conduct safety checks only',
                        'Emergency repairs when needed',
                        'No dedicated spare parts inventory'
                    ]
                }
            ];
            
            let html = '';
            actionPlans.forEach(plan => {
                if (plan.count > 0) {
                    html += `
                        <div class="mb-4">
                            <h5 class="font-medium text-gray-900 mb-2">${plan.title} (${plan.count} assets)</h5>
                            <ul class="list-disc list-inside text-gray-700 ml-4">
                                ${plan.actions.map(action => `<li>${action}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                }
            });
            
            summary.innerHTML = html || '<p class="text-gray-500">No assets assessed yet.</p>';
        }

        function updateAllTables() {
            updateAssetsTable();
            updateAssessmentTable();
            updateActionPlanSummary();
        }

        // Global functions for onclick events
        window.editAsset = function(assetId) {
            const asset = assets.find(a => a.id === assetId);
            if (asset) {
                showAssetModal(asset);
            }
        };

        window.deleteAsset = function(assetId) {
            if (confirm('Are you sure you want to delete this asset?')) {
                assets = assets.filter(a => a.id !== assetId);
                updateAllTables();
                updateDashboard();
            }
        };

        // Report generation functions
        function generatePDFReport() {
            alert('PDF generation would be implemented here. This would create a comprehensive report with all assessment data, charts, and action plans.');
        }

        function exportToExcel() {
            const csvContent = generateCSVContent();
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'criticality_assessment_export.csv';
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function exportToCSV() {
            exportToExcel(); // Same implementation for CSV
        }

        function generateCSVContent() {
            const headers = [
                'Asset ID', 'Asset Name', 'Type', 'Location', 'Manufacturer', 
                'Model', 'Install Date', 'Description', 'Safety Score', 
                'Environmental Score', 'Production Score', 'Financial Score', 
                'Quality Score', 'Reputation Score', 'Criticality', 'Tier'
            ];
            
            let content = headers.join(',') + '\n';
            
            assets.forEach(asset => {
                const row = [
                    asset.id, asset.name, asset.type, asset.location,
                    asset.manufacturer || '', asset.model || '', asset.installDate || '',
                    asset.description || '', asset.scores.safety, asset.scores.environmental,
                    asset.scores.production, asset.scores.financial, asset.scores.quality,
                    asset.scores.reputation, asset.criticality, asset.tier
                ];
                content += row.join(',') + '\n';
            });
            
            return content;
        }

        // Bulk operations
        function showBulkScoreModal() {
            alert('Bulk scoring interface would be implemented here.');
        }

        function showTemplateModal() {
            alert('Template application interface would be implemented here.');
        }

        function resetAllScores() {
            if (confirm('Are you sure you want to reset all assessment scores?')) {
                assets.forEach(asset => {
                    asset.scores = {
                        safety: 1,
                        environmental: 1,
                        production: 1,
                        financial: 1,
                        quality: 1,
                        reputation: 1
                    };
                    asset.criticality = calculateCriticality(asset.scores);
                    asset.tier = calculateTier(asset.criticality);
                });
                
                updateAllTables();
                updateDashboard();
            }
        }

        // Template management
        function loadSelectedTemplate() {
            alert('Template loading would be implemented here.');
        }

        function saveCustomTemplate() {
            alert('Custom template saving would be implemented here.');
        }

        function exportConfiguration() {
            const config = {
                criteriaSettings: criteriaSettings,
                criteriaWeights: criteriaWeights,
                language: currentLanguage
            };
            
            const blob = new Blob([JSON.stringify(config, null, 2)], { type: 'application/json' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'criticality_assessment_config.json';
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function importConfiguration() {
            alert('Configuration import would be implemented here.');
        }

        function resetToDefaults() {
            if (confirm('Are you sure you want to reset all settings to defaults?')) {
                // Reset criteria weights
                criteriaWeights = {
                    safety: 25,
                    environmental: 20,
                    production: 25,
                    financial: 15,
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDl0EzHCePMQwt%2BJNxiPp0iDlLnJwc6Zr23f%2FpUmKJymcitdKQaCm5eLc5xPLeQoLXbUZJUMbPYbIH1IZx3f2xbeVt2%2BsUgRM6%2BrWhzRtxASpXDzgDGKRbU5IEJ2vvvaC2QZuvgj6E%2Bo2xKLsM%2BlhqTyc1%2BfPmj3I97CZ3J1cHcaxHZ99yVi49fpUofonYqE3wE2c0Na%2BU065Ul5bxCdc3BJ8JkY3iQx9kOyZUUBSwThT%2BJfvOys%2BANi2CEBmbyDeqIp2VY5VQI16Hos%2Bn35VNod9lv2jIm%2BhWzvebdU0%2FWscKWC1FRqSMPvB02mGVb9%2F7BjWl80vreuXFOMO8IfW2C4FcU%2B%2F%2BP2fdB6kxd8vi4ecVf1izMIVgyqSUmo5ccV1%2FmFPH8P1qp00PsYkaWrrAap2%2Bpi2rcOlv9cjlrclC6oJoqP79EDAatOp8ft4R43sYRh6F9gBInFamKfjaoIELPUYDz3vXQIOEbGBkWUfD6pgXkDXxW2NfPNehRbLnBAKK6JZjLrLwXqhH7x97j6TaYoxh2WnaTl%2F09On2jogKgvt";
        window.__genspark_locale = "en-US";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDl0EzHCePMQwt+JNxiPp0iDlLnJwc6Zr23f/pUmKJymcitdKQaCm5eLc5xPLeQoLXbUZJUMbPYbIH1IZx3f2xbeVt2+sUgRM6+rWhzRtxASpXDzgDGKRbU5IEJ2vvvaC2QZuvgj6E+o2xKLsM+lhqTyc1+fPmj3I97CZ3J1cHcaxHZ99yVi49fpUofonYqE3wE2c0Na+U065Ul5bxCdc3BJ8JkY3iQx9kOyZUUBSwThT+JfvOys+ANi2CEBmbyDeqIp2VY5VQI16Hos+n35VNod9lv2jIm+hWzvebdU0/WscKWC1FRqSMPvB02mGVb9/7BjWl80vreuXFOMO8IfW2C4FcU+/+P2fdB6kxd8vi4ecVf1izMIVgyqSUmo5ccV1/mFPH8P1qp00PsYkaWrrAap2+pi2rcOlv9cjlrclC6oJoqP79EDAatOp8ft4R43sYRh6F9gBInFamKfjaoIELPUYDz3vXQIOEbGBkWUfD6pgXkDXxW2NfPNehRbLnBAKK6JZjLrLwXqhH7x97j6TaYoxh2WnaTl/09On2jogKgvt";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    <script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"rayId":"953eba93fc8a2a3f","serverTiming":{"name":{"cfExtPri":true,"cfEdge":true,"cfOrigin":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}},"version":"2025.6.2","token":"4edd5f8ec12a48cfa682ab8261b80a79"}' crossorigin="anonymous"></script>
